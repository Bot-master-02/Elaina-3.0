/* eslint-disable @typescript-eslint/no-explicit-any */
import Client from '../lib/Whatsapp/Client'
import BaseCommand from '../lib/BaseCommand'
import { ICommandOptions } from '../interfaces'

export const DefineCommand = (identifier: string, options: ICommandOptions) => {
    return <T extends BaseCommand>(target: new (...args: any[]) => T): new (client: Client) => T =>
        new Proxy(target, {
            construct: (ctx, [client]): T => new ctx(client, identifier, options)
        })
}
